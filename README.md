# TCP服务器---Paguma

## 一、基础server模块
**方法：**

- 启动服务器：基本的服务器开发
    1. 创建addr
    2. 创建listener
    3. 处理客户端的基本业务
    
- 停止服务：做一些资源的回收和状态的回执
- 运行服务器：调用Start()方法，调用之后阻塞处理，在之间可以做今后的一个扩展
- 初始化Server

**属性：**

- name名称
- 监听的IP
- 监听的端口

## 二、链接封装和业务绑定

**方法：**

- 启动链接Start()
- 停止链接Stop()
- 获取当前链接的conn对象（套接字）
- 得到链接ID
- 得到客户端链接地址和端口
- 发送数据的方法Send()

**属性：**

- socket TCP套接字
- 链接的ID
- 当前链接的状态（是否已关闭）
- 与当前链接所绑定的处理业务方法
- 等待链接被动退出的channel

## 三、基础router模块

### 1）Request请求封装

> 将链接和数据绑定在一起

**属性：**

- 链接Connection
- 请求数据

**方法：**

- 得到当前链接
- 得到当前数据
- 新建一个Request请求

### 2）Router模块

抽象层定义一个**抽象IRouter**，有以下方法：

- 处理业务之前的方法
- 处理业务的主方法
- 处理业务之后的方法

然后通过一个**具体的BaseRouter**，来实现上述的三个方法，后续可以有新的router去继承BaseRouter，然后对上述方法进行重写。

> 注意：这里用到了**模板方法设计模式**

### 3）paguma继承router模块

该模块有如下功能：

- IServer增添路由添加功能
- Server增添路由成员
- Connection类绑定一个Router成员
- 在Connection调用已经注册的Router处理业务











